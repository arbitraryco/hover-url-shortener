// http://simplesideias.com.br/ajax
var ajax={request:function(e){var t=this.create(),n=this,r=0,i,s,o;var u,a,f,l,c,h,p,d,v,m;u=e.onload;a=e.onrequest;f=e.filter;l=e.callback;c=e.tries;h=e.target;p=e.url;d=e.method;v=e.xtra;m=e.params;d=d.toLowerCase();if(m){if(typeof m=="object"){i=[];for(s in m){o=m[s];i.push(s+"="+(typeof f=="function"?f.call(null,o):escape(o)))}m=i.join("&")}if(d=="get"){p+=p.indexOf("?")==-1?"?"+m:"&"+m}}t.open(d,p,true);if(d=="post"){t.setRequestHeader("Method","POST "+p+" HTTP/1.1");t.setRequestHeader("Content-type","application/x-www-form-urlencoded")}else{m=null}t.onreadystatechange=function(){if(t.readyState!=4){return}if(typeof u=="function"){u.call(null)}if(t.status==200){if(h){if(t.getResponseHeader("content-type").match(/(html|plain)/)){n.parseHTML(h,t.responseText)}}if(typeof l=="function"){l.call(null,true,t,v)}}else{if(c>0){if(r<c){r++;t.abort();t.send(m)}}else if(typeof l=="function"){l.call(null,false,t,v)}}};if(typeof a=="function"){a.call(null)}t.send(m);return t},create:function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){null}}}return e},get:function(e){e.method="GET";this.request(e)},post:function(e){e.method="POST";this.request(e)},parseHTML:function(e,t,n){var r,i,s,o,u;e=document.getElementById(e);if(e){if(n){r=e.cloneNode(false);e.parentNode.replaceChild(r,e);e=r}u=document.createElement("div");u.innerHTML=t;s=u.childNodes;for(o=0;i=s[o];o++){i=i.cloneNode(true);e.appendChild(i)}}}}